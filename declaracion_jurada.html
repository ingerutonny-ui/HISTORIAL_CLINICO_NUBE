<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HC NUBE | Declaraci√≥n Jurada</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8fafc; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; padding: 40px 20px; }
        .jurada-container { max-width: 1000px; width: 100%; background: white; padding: 50px; border-radius: 40px; box-shadow: 0 15px 35px rgba(0,0,0,0.02); }
        
        .form-label { font-size: 10px; font-weight: 700; color: #b0bac9; text-transform: uppercase; margin-top: 18px; display: block; text-align: left; margin-left: 10px; letter-spacing: 0.5px; line-height: 1.2; }
        
        .form-control, .form-select { border-radius: 15px; background-color: #f3f6f9; border: 2px solid transparent; padding: 12px; font-weight: 600; color: #1e293b; text-transform: uppercase; margin-top: 5px; font-size: 13px; }
        .form-control:focus, .form-select:focus { background-color: #ffffff; border-color: #24a174; box-shadow: none; }
        
        .readonly-field { border: 2px dashed #d1eadd; background-color: #f9fdfc; color: #24a174; font-weight: 800; }

        .btn-accion { background-color: #24a174; border: none; border-radius: 20px; padding: 18px; font-weight: 700; width: 100%; color: white; margin-top: 30px; text-transform: uppercase; letter-spacing: 1px; transition: 0.3s; }
        .btn-accion:hover { background-color: #1e855f; transform: translateY(-2px); }
        .btn-volver { background-color: #f1f5f9; color: #b0bac9; border: none; border-radius: 20px; padding: 12px; font-weight: 700; width: 100%; margin-top: 15px; text-transform: uppercase; font-size: 10px; }

        .step-content { display: none; }
        .step-active { display: block; }
        
        .seccion-titulo { color: #1e293b; font-weight: 800; font-size: 16px; border-bottom: 2px solid #f1f5f9; padding-bottom: 10px; margin-bottom: 20px; display: flex; align-items: center; justify-content: space-between; }
        .step-tag { font-size: 9px; background: #f0fdf4; padding: 4px 10px; border-radius: 8px; color: #24a174; font-weight: 800; }
    </style>
</head>
<body>

    <div class="jurada-container">
        <div class="text-center mb-4">
            <h2 style="font-weight:800; color:#1e293b; font-size: 22px;">DECLARACI√ìN JURADA DE SALUD</h2>
            <p id="indicadorPaso" style="color:#b0bac9; font-size: 10px; font-weight: 700; letter-spacing: 1.5px; text-transform: uppercase;">SECCI√ìN 1: DATOS GENERALES</p>
        </div>

        <form id="formMaster">
            <div id="paso1" class="step-content step-active">
                <div class="seccion-titulo"><span>I. FILIACI√ìN DEL TRABAJADOR</span><span class="step-tag">PASO 1 / 3</span></div>
                
                <div class="row">
                    <div class="col-md-5"><label class="form-label">Apellidos y Nombres</label><input type="text" id="p_nombre" class="form-control readonly-field" readonly></div>
                    <div class="col-md-3"><label class="form-label">Carnet de Identidad</label><input type="text" id="p_ci" class="form-control readonly-field text-center" readonly></div>
                    <div class="col-md-4"><label class="form-label">C√≥digo Generado</label><input type="text" id="p_codigo" class="form-control readonly-field text-center" readonly></div>
                </div>

                <div class="row">
                    <div class="col-md-2"><label class="form-label">Edad</label><input type="number" name="edad" class="form-control" required></div>
                    <div class="col-md-3"><label class="form-label">Sexo</label><select name="sexo" class="form-select"><option>MASCULINO</option><option>FEMENINO</option></select></div>
                    <div class="col-md-3"><label class="form-label">Fecha Nacimiento</label><input type="date" name="fecha_nac" class="form-control" required></div>
                    <div class="col-md-4"><label class="form-label">Lugar de Nacimiento</label><input type="text" name="lugar_nac" class="form-control"></div>
                </div>

                <div class="row">
                    <div class="col-md-5"><label class="form-label">Domicilio (Av./Calle)</label><input type="text" name="domicilio" class="form-control"></div>
                    <div class="col-md-2"><label class="form-label">N¬∞ Casa</label><input type="text" name="n_casa" class="form-control"></div>
                    <div class="col-md-5"><label class="form-label">Zona / Barrio</label><input type="text" name="barrio" class="form-control"></div>
                </div>

                <div class="row">
                    <div class="col-md-3"><label class="form-label">Ciudad</label><input type="text" name="ciudad" class="form-control"></div>
                    <div class="col-md-3"><label class="form-label">Pa√≠s</label><input type="text" name="pais" class="form-control"></div>
                    <div class="col-md-3"><label class="form-label">Tel√©fono / Celular</label><input type="text" name="telf" class="form-control"></div>
                    <div class="col-md-3"><label class="form-label">Estado Civil</label><select name="civil" class="form-select"><option>SOLTERO/A</option><option>CASADO/A</option><option>DIVORCIADO/A</option><option>VIUDO/A</option></select></div>
                </div>

                <div class="row">
                    <div class="col-md-12"><label class="form-label">Profesi√≥n / Labor que desempe√±a actualmente</label><input type="text" name="labor" class="form-control"></div>
                </div>

                <button type="button" onclick="cambiarPaso(2)" class="btn-accion">Continuar a Evaluaci√≥n M√©dica</button>
            </div>

            <div id="paso2" class="step-content">
                <div class="seccion-titulo"><span>II. ANTECEDENTES PATOL√ìGICOS (POR SISTEMAS)</span><span class="step-tag">PASO 2 / 3</span></div>
                
                <div class="row">
                    <div class="col-md-6">
                        <label class="form-label">VISTA (Visi√≥n, Glaucoma, Retinopat√≠a, Lentes)</label><input type="text" name="s_vista" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">AUDITIVO (Hipoacusia, Otitis, V√©rtigo)</label><input type="text" name="s_auditivo" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">RESPIRATORIOS (TBC, EPOC, Asma, Bronquitis)</label><input type="text" name="s_respira" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">CARDIOVASCULARES (HTA, Arritmia, Infarto)</label><input type="text" name="s_cardio" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">DIGESTIVOS (Gastritis, √ölcera, Hernias)</label><input type="text" name="s_digesta" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">NERVIOSO/MENTAL (Epilepsia, Ansiedad)</label><input type="text" name="s_nervio" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">URINARIO (Cistitis, C√°lculos, Ri√±ones)</label><input type="text" name="s_urina" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">GENITALES (Pr√≥stata, Quistes, ITS)</label><input type="text" name="s_genital" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">OSTEOMUSCULARES (Fracturas, Escoliosis)</label><input type="text" name="s_osteo" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">PIEL/DERMATOL√ìGICOS (Acn√©, Hongos, Alergias)</label><input type="text" name="s_piel" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">INFECCIOSAS (Hepatitis, Chagas, VIH)</label><input type="text" name="s_infecto" class="form-control" placeholder="NORMAL / NINGUNO">
                    </div>
                    <div class="col-md-6">
                        <label class="form-label">SANGU√çNEOS (Anemia, Coagulaci√≥n)</label><input type="text" name="s_sangre" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">ENDOCRINOS (Diabetes, Tiroides)</label><input type="text" name="s_endo" class="form-control" placeholder="NORMAL / NINGUNO">
                        <label class="form-label">ALERGIAS (Medicamentos, Alimentos)</label><input type="text" name="s_alergia" class="form-control" placeholder="NINGUNA">
                        <label class="form-label">CIRUG√çAS ANTERIORES (Cu√°les/Cu√°ndo)</label><input type="text" name="s_cirugia" class="form-control" placeholder="NINGUNA">
                        <label class="form-label">HOSPITALIZACIONES (Motivo)</label><input type="text" name="s_hospi" class="form-control" placeholder="NINGUNA">
                        <label class="form-label">ACCIDENTES LABORALES (Detalle)</label><input type="text" name="s_acc_lab" class="form-control" placeholder="NINGUNO">
                        <label class="form-label">ACCIDENTES COMUNES (Detalle)</label><input type="text" name="s_acc_com" class="form-control" placeholder="NINGUNO">
                        <label class="form-label">VACUNAS (Esquema completo?)</label><input type="text" name="s_vacuna" class="form-control" placeholder="S√ç / NO / CU√ÅLES">
                        <label class="form-label">MEDICACI√ìN ACTUAL (Qu√© toma?)</label><input type="text" name="s_medica" class="form-control" placeholder="NINGUNO">
                        <label class="form-label">ANTECEDENTES FAMILIARES (Diabetes, HTA)</label><input type="text" name="s_fam" class="form-control" placeholder="NINGUNO">
                        <label class="form-label">OTRAS OBSERVACIONES</label><input type="text" name="s_obs" class="form-control" placeholder="NINGUNA">
                    </div>
                </div>

                <button type="button" onclick="cambiarPaso(3)" class="btn-accion">Siguiente: H√°bitos y Riesgos</button>
                <button type="button" onclick="cambiarPaso(1)" class="btn-volver">Regresar</button>
            </div>

            <div id="paso3" class="step-content">
                <div class="seccion-titulo"><span>III. H√ÅBITOS Y RIESGOS LABORALES</span><span class="step-tag">PASO 3 / 3</span></div>
                <div class="row">
                    <div class="col-md-4"><label class="form-label">Alcohol (Cant./Frec.)</label><input type="text" name="alcohol" class="form-control"></div>
                    <div class="col-md-4"><label class="form-label">Tabaco (Cant./Frec.)</label><input type="text" name="tabaco" class="form-control"></div>
                    <div class="col-md-4"><label class="form-label">Drogas (Coca/Otros)</label><input type="text" name="drogas" class="form-control"></div>
                </div>
                <div class="row">
                    <div class="col-md-6"><label class="form-label">Deportes / Actividad F√≠sica</label><input type="text" name="deporte" class="form-control"></div>
                    <div class="col-md-6"><label class="form-label">Horas de Sue√±o Diario</label><input type="number" name="sueno" class="form-control"></div>
                </div>
                <div class="row">
                    <div class="col-md-12"><label class="form-label">Riesgos a los que est√° expuesto en su trabajo (Ruido, Polvo, Qu√≠micos, etc.)</label><textarea name="riesgos" class="form-control" rows="3"></textarea></div>
                </div>

                <button type="submit" class="btn-accion">Finalizar y Guardar en Nube üíæ</button>
                <button type="button" onclick="cambiarPaso(2)" class="btn-volver">Regresar</button>
            </div>
        </form>
    </div>

    <script>
        window.onload = () => {
            // RECUPERACI√ìN TOTAL DESDE REGISTRO_PACIENTE.HTML
            const nom = localStorage.getItem('temp_nombres') || "";
            const ape = localStorage.getItem('temp_apellidos') || "";
            const ci = localStorage.getItem('temp_ci') || "NO REGISTRADO"; // Cambiado a temp_ci
            const cod = localStorage.getItem('temp_codigo') || "SIN C√ìDIGO";

            document.getElementById('p_nombre').value = (nom + " " + ape).trim();
            document.getElementById('p_ci').value = ci;
            document.getElementById('p_codigo').value = cod;
        };

        function cambiarPaso(p) {
            document.querySelectorAll('.step-content').forEach(s => s.classList.remove('step-active'));
            document.getElementById('paso' + p).classList.add('step-active');
            const titulos = ["", "SECCI√ìN 1: DATOS GENERALES", "SECCI√ìN 2: ANTECEDENTES", "SECCI√ìN 3: H√ÅBITOS Y RIESGOS"];
            document.getElementById('indicadorPaso').innerText = titulos[p];
            window.scrollTo(0,0);
        }

        document.getElementById('formMaster').onsubmit = async (e) => {
            e.preventDefault();
            alert("ENVIANDO TODOS LOS DATOS A LA NUBE RENDER...");
            // Aqu√≠ ir√° el fetch final hacia tu API en Render
        };
    </script>
</body>
</html>
