<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HC NUBE | Sección 1: Afiliación</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f8fafc; font-family: 'Segoe UI', sans-serif; padding: 30px; display: flex; flex-direction: column; align-items: center; }
        .form-container { max-width: 900px; width: 100%; background: white; padding: 40px; border-radius: 40px; box-shadow: 0 15px 35px rgba(0,0,0,0.02); }
        .titulo-principal { font-weight: 800; color: #1e293b; font-size: 24px; text-transform: uppercase; text-align: center; margin-bottom: 30px; }
        .seccion-titulo { background-color: #f3f6f9; color: #1e293b; padding: 12px 20px; border-radius: 15px; font-weight: 800; font-size: 13px; margin-top: 30px; margin-bottom: 20px; text-transform: uppercase; }
        .form-label { font-size: 10px; font-weight: 700; color: #b0bac9; text-transform: uppercase; margin-bottom: 5px; display: block; }
        .form-control, .form-select { border-radius: 15px; background-color: #f3f6f9; border: none; padding: 12px; font-weight: 600; color: #1e293b; text-transform: uppercase; font-size: 13px; }
        .readonly-field { background-color: #f0fdf4; color: #24a174; border: 1px dashed #d1eadd; cursor: not-allowed; }
        .btn-siguiente { background-color: #24a174; border: none; border-radius: 20px; padding: 18px; font-weight: 700; width: 100%; color: white; margin-top: 40px; text-transform: uppercase; }
        .row-gap { margin-bottom: 20px; }
    </style>
</head>
<body>
    <div class="form-container">
        <h1 class="titulo-principal">Declaración Jurada de Salud</h1>
        
        <form id="formSeccion1">
            <div class="seccion-titulo">1. Afiliación del Trabajador</div>
            
            <div class="row row-gap">
                <div class="col-md-8">
                    <label class="form-label">Apellidos y Nombres</label>
                    <input type="text" id="nombre_completo" class="form-control readonly-field" readonly>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Código de Paciente</label>
                    <input type="text" id="codigo_id" class="form-control readonly-field" readonly style="text-align: center;">
                </div>
            </div>

            <div class="row row-gap">
                <div class="col-md-2">
                    <label class="form-label">Edad</label>
                    <input type="number" id="edad" class="form-control" required>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Sexo</label>
                    <select id="sexo" class="form-select" required>
                        <option value="MASCULINO">MASCULINO</option>
                        <option value="FEMENINO">FEMENINO</option>
                    </select>
                </div>
                <div class="col-md-4">
                    <label class="form-label">Fecha de Nacimiento</label>
                    <input type="date" id="fecha_nacimiento" class="form-control" required>
                </div>
                <div class="col-md-3">
                    <label class="form-label">Lugar de Nacimiento</label>
                    <input type="text" id="lugar_nacimiento" class="form-control" oninput="this.value = this.value.toUpperCase()">
                </div>
            </div>

            <div class="row row-gap">
                <div class="col-md-5">
                    <label class="form-label">Av./Calle</label>
                    <input type="text" id="domicilio_av_calle" class="form-control" oninput="this.value = this.value.toUpperCase()">
                </div>
                <div class="col-md-2">
                    <label class="form-label">Número</label>
                    <input type="text" id="domicilio_numero" class="form-control">
                </div>
                <div class="col-md-5">
                    <label class="form-label">Barrio / Zona</label>
                    <input type="text" id="barrio" class="form-control" oninput="this.value = this.value.toUpperCase()">
                </div>
            </div>

            <div class="row row-gap">
                <div class="col-md-3"><label class="form-label">Ciudad</label><input type="text" id="ciudad" class="form-control" oninput="this.value = this.value.toUpperCase()"></div>
                <div class="col-md-3"><label class="form-label">País</label><input type="text" id="pais" class="form-control" value="BOLIVIA" oninput="this.value = this.value.toUpperCase()"></div>
                <div class="col-md-3"><label class="form-label">Teléfono</label><input type="text" id="telefono" class="form-control"></div>
                <div class="col-md-3">
                    <label class="form-label">Estado Civil</label>
                    <select id="estado_civil" class="form-select">
                        <option value="SOLTERO(A)">SOLTERO(A)</option>
                        <option value="CASADO(A)">CASADO(A)</option>
                        <option value="DIVORCIADO(A)">DIVORCIADO(A)</option>
                        <option value="VIUDO(A)">VIUDO(A)</option>
                    </select>
                </div>
            </div>

            <div class="row row-gap">
                <div class="col-md-12">
                    <label class="form-label">Profesión o Labor que desempeña</label>
                    <input type="text" id="profesion_labor" class="form-control" oninput="this.value = this.value.toUpperCase()">
                </div>
            </div>

            <button type="submit" class="btn-siguiente">PASAR A SECCIÓN 2: ANTECEDENTES</button>
        </form>
    </div>

    <script>
        window.onload = () => {
            // Recupera datos del paciente del paso anterior (registro/búsqueda)
            document.getElementById('nombre_completo').value = `${localStorage.getItem('temp_apellidos') || ''} ${localStorage.getItem('temp_nombres') || ''}`;
            document.getElementById('codigo_id').value = localStorage.getItem('temp_codigo') || "0";
        };

        document.getElementById('formSeccion1').onsubmit = (e) => {
            e.preventDefault();
            
            // Recopilación de datos de la Sección 1
            const dataSeccion1 = {
                edad: document.getElementById('edad').value,
                sexo: document.getElementById('sexo').value,
                fecha_nacimiento: document.getElementById('fecha_nacimiento').value,
                lugar_nacimiento: document.getElementById('lugar_nacimiento').value,
                domicilio_av_calle: document.getElementById('domicilio_av_calle').value,
                domicilio_numero: document.getElementById('domicilio_numero').value,
                barrio: document.getElementById('barrio').value,
                ciudad: document.getElementById('ciudad').value,
                pais: document.getElementById('pais').value,
                telefono: document.getElementById('telefono').value,
                estado_civil: document.getElementById('estado_civil').value,
                profesion_labor: document.getElementById('profesion_labor').value
            };

            // Guardar localmente para no perder datos al cambiar de sección
            localStorage.setItem('datos_seccion_1', JSON.stringify(dataSeccion1));
            
            alert("Sección 1 guardada con éxito. Procediendo a la Sección 2.");
            
            // Aquí es donde en el siguiente paso habilitaremos la carga de la Sección 2
        };
    </script>
</body>
</html>
